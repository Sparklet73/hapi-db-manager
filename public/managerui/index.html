<!DOCTYPE html>
<html ng-app="dbManagerApp">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="A database manager plugin for hapi">
        <meta name="author" content="Tony Huang <tony@huang.ninja> (http://huang.ninja)">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        <link href="<%= dbManager.managerPath %>/css/dashboard.css" rel="stylesheet">

        <!-- JQuery Library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

        <!-- Tether Library -->
        <script src="https://unpkg.com/tether@1.4.0/dist/js/tether.min.js"></script>

        <!-- Bootstrap JS -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

        <!-- AngularJS Library -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>
        
        <title>Database Manager</title>
    </head>
    <body ng-controller="MainController" ng-init="init('<%= dbManager.managerPath %>')">
        <nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
            <a href="<%= dbManager.managerPath %>" class="navbar-brand">DB Manager</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ml-auto">
                    <li class="native-item active">
                        <a href="#" class="nav-link">Logout</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container-fluid">
            <div class="row">
                <!-- Nav -->
                <nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar">
                    <!-- Database List -->
                    <div class="d-flex justify-content-center">
                        <div class="btn-group">
                            <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                {{selectedDB}}
                            </button>
                            <div class="dropdown-menu" ng-repeat="db in dbList">
                                <a class="dropdown-item" href="#" ng-click="changeDB(db)">{{db}}</a>
                            </div>
                        </div>
                    </div>

                    <!-- Table List -->
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item" ng-repeat="table in tableList">
                            <a href="#" class="nav-link" ng-click="changeTable(table)">{{table}}</a>
                        </li>
                    </ul>

                    <!-- New Table -->
                    <div class="d-flex justify-content-center">
                        <button type="button" class="btn btn-outline-success btn-sm" ng-click="newTable()">New Table</button>
                    </div>
                </nav>

                <!-- Main content -->
                <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
                    <!-- Title Content -->
                    <h1>{{selectedTable}}</h1>

                    <!-- Function Block -->
                    <div class="d-flex justify-content-between pb-3">
                        <button type="button" class="btn btn-outline-success btn-sm" ng-click="newData()">New Data</button>
                        <button type="button" class="btn btn-outline-success btn-sm" ng-click="editTable()">Edit Table</button>
                    </div>

                    <!-- Content Block -->
                    <div class="table-responsive py-3">
                        <table class="table table-striped table-bordered table-sm table-hover">
                            <thead class="thead-default">
                                <tr>
                                    <th ng-repeat="column in columnList">{{column}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="data in dataList">
                                    <td ng-repeat="column in columnList">{{data[column]}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="d-flex justify-content-center">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination">
                                <li class="page-item" ng:class="{true: 'disabled', false:''}[page==1]">
                                    <a class="page-link" href="#" aria-label="Previous" ng-click="changePage(page-1)">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                                <li class="page-item" ng:class="{true: 'active', false:''}[page==i]" ng-repeat="i in totalPageArray">
                                    <a class="page-link" href="#" ng-click="changePage(i)">{{i}}</a>
                                </li>
                                <li class="page-item" ng:class="{true: 'disabled', false:''}[page==totalPage]">
                                    <a class="page-link" href="#" aria-label="Next" ng-click="changePage(page+1)">
                                        <span aria-hidden="true">&raquo;</span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </main>
            </div>
        </div>
        
        <!-- AngularJS Content -->
        <script src="<%= dbManager.managerPath %>/js/index.js"></script>
        <script src="<%= dbManager.managerPath %>/controllers/main.js"></script>
        <script src="<%= dbManager.managerPath %>/services/db.js"></script>
    </body>
</html>